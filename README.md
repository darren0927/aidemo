## 什么是智能体（Agent）？

吴恩达在最新演讲说AI智能代理工作流的趋势。
https://www.sohu.com/a/769663661_114819
OpenAI应用研发主管Lilian weng 在一篇博文里定义了基于LLM构建AI Agents的框架。她指出，Agent=LLM（大型语言模型）+记忆（Memory）+规划技能（Planning）+工具使用（Tool Use），其中，LLM是智能体的大脑，而记忆、规划和工具使用能力是关键组件。它也成为大模型时代Agent的经典定义。

简单来说，Agent就是基于大模型通用的能力开发的软件，他是通过大模型通用能力+工具+API的集合，来解决某一个特定场景下的问题。比如，天气智能体，他通过大模型通用能力 + 调用实时和未来天气API，给出合理的出行建议。

## 什么是链（Chain）？
写一个提示词输入给大模型，大模型进行输出回答，很多情况下我们就是这样使用大语言模型。如果要实现比较好的效果，通常需要多轮对话。Chain就是为了解决这个问题，一个Chain就是多个LLM+PromptTemplate的组合。langchain的官方定义是：“在简单应用中，单独使用LLM是可以的， 但更复杂的应用需要将LLM进行链接 - 要么相互链接，要么与其他组件链接。LangChain为这种"链接"应用提供了Chain接口。我们将链定义得非常通用，它是对组件调用的序列，可以包含其他链。"
![image](https://github.com/darren0927/aidemo/assets/5181793/805f11c7-b041-4d10-964c-b932956b269a)

## 开发步骤
本文通过对接阿里云通义千问和智普清言大模型API的方式，开发一款个人助理Agent，他不仅精通政治、经济、哲学、历史、社会、文学多学科知识，也可以通过Chain的提示词来进行思考调用外部API完成经济数据指标的获取，如美元兑换人民币汇率。以下几个步骤详细介绍了智能体demo的开发步骤：

#### 1、接入基座大模型
定义一个LLMLoader.py大模型加载器，根据配置文件中的模型名称来加载具体的大模型基座。目前阿里云通义千问和智普清言都分别提供API和SDK的接入方式。如下通过API的方式接入阿里云千问大模型和通过SDK的方式接入了ZhiPu大模型。

#### 2、开发Agent和Chain
ReAct是最常见的一种Agent，在LangChain中的实现为ZeroShotAgent，它的特点在于将thought和action结合，让模型在做决策的时候有思考的过程。如下代码，通过prefix执行了提示词的前缀告诉Agent可以通过调用工具来回答问题。通过suffi增加提示词后缀，明确Agent的个人助理身份。

通过角色、前提、职责、限制、用户问题，定义提示词模板。因为大模型本身不能调用外部API来获取汇率、黄金、比特币价格数据，在执行chain时就会根据

template = """
#角色
    你是一名出色的个人助理,你在全球政治、经济、哲学、历史、社会、文学多个学科领域都具备相当的高度.
#前提
    作为一个人工智能助手你服务于你的主人
#职责
    1、基于你掌握的知识和数据，提供给你的主人每日的经济数据指标，包括但不限于美元兑人民币汇率（现汇买入价）、国际黄金价格、比特币BTC价格等指标。
    2、基于你掌握的历史和文学知识，你需要在回答主人的问题答案之前，说一句今日警句。
#限制
    1、经济数据指标，你需要尽可能使用最新的数据，同时需要保证准确性。
    2、今日警句字数不超过50个字，同一个句子一天24小时之内不能出现超过1次。
问题
{question}
"""

#### 3、开发工具
开发外部接口调用能力的工具，通过函数的description描述告诉Agent什么情况下可以使用此工具。

#### 5、本地启动与调试
执行main.py本地启动Agent，通过ApiFox本地发送HTTP请求调用Agent，向Agent提问。
![image](https://github.com/darren0927/aidemo/assets/5181793/a5a70803-626a-44c8-aafa-268c731812ad)

如下图，根据用户输入的问题，Agent经过思考然后执行action调用工具来从外部获取汇率信息，然后将最终结果返回给用户。
![image](https://github.com/darren0927/aidemo/assets/5181793/f5b96b3b-481c-4bc7-be9d-3705855ea8ac)

#### 6、写在最后

在当今数字化时代，人工智能AI正迅速成为推动创新和增长的关键力量。随着技术的不断进步，AI工程化实践已成为软件开发中的一个重要议题。LangChain为AI工程化提供了一套解决方案，通过LangChain开发者可以更高效地构建、部署和管理AI应用，实现从概念到产品的快速转化，开发智能体的无限可能。
